function time_filter(a,b,c){return a>b&a<c};function delinquency(a,b){var c=0;a=null!=a?a:[];for(i=0;i<a.length;i++)c+=1==a[i].is_late&a[i].form==b.form&time_filter(a[i].deadline,b.min_date,b.max_date);return c};function symbology(a,b){var c=0;a=null!=a?a:[];for(i=0;i<a.length;i++)c+=a[i].field==b.field&time_filter(a[i].new_date,b.min_date,b.max_date);return c};function combine_scores(a,b){return a.symbology+a.delinquency}function format_fields(a,b){out={};for(s in a)out[s]={value:a[s],is_flag:a[s]>=b[s].threshold,have:!0};return out}var functions={symbology:symbology,delinquency:delinquency};function run(){var a={};for(k in params)a[k]=functions[k](_source[k],params[k]);return score?combine_scores(a,params):format_fields(a,params)}run();