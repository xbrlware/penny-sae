function time_filter(a,c,b){return a>c&a<b};function delinquency(a,c){var b=0;a=null!=a?a:[];for(i=0;i<a.length;i++)b+=1==a[i].is_late&a[i].form==c.form&time_filter(a[i].deadline,c.min_date,c.max_date);return{value:b,is_flag:b>=c.threshold,have:!0}};function otc_neighbors(a,c){var b=0,d=!1;null!=a&&(b=100*a.otc_count/a.total_count,d=a.total_count>=c.number_of_neighbors[0]);return{value:b,is_flag:d&d&b>c.threshold,have:!0}};function symbology(a,c){var b=0;a=null!=a?a:[];for(i=0;i<a.length;i++)b+=a[i].field==c.field&time_filter(a[i].new_date,c.min_date,c.max_date);return{value:b,is_flag:b>=c.threshold,have:!0}};function combine_scores(a,c){var b=0;for(s in a)b+=a[s].value;return b}var functions={symbology:symbology,delinquency:delinquency,otc_neighbors:otc_neighbors};function run(){var a={};for(k in params)a[k]=functions[k](_source[k],params[k]);return score?combine_scores(a,params):a}run();